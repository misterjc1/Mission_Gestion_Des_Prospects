<div class="dashboard-container">
  <div class="header">
    <div>
      <h1> Hello/Bonjour, {{userName}} !</h1>
      <p>Voici un aperçu de vos prospects</p>
    </div>
    <button mat-raised-button color="warn" (click)="logout()">
      <mat-icon>exit_to_app</mat-icon>
      Déconnexion
    </button>
  </div>

  <div *ngIf="loading" class="loading">Chargement des statistiques...</div>

  <div *ngIf="!loading && stats" class="stats-grid">
    <mat-card class="stat-card total">
      <mat-icon>business</mat-icon>
      <div class="stat-content">
        <h2>{{stats.totalProspects}}</h2>
        <p>Total Prospects</p>
      </div>
    </mat-card>

    <mat-card class="stat-card new">
      <mat-icon>fiber_new</mat-icon>
      <div class="stat-content">
        <h2>{{stats.nouveaux}}</h2>
        <p>Nouveaux</p>
      </div>
    </mat-card>

    <mat-card class="stat-card contact">
      <mat-icon>phone</mat-icon>
      <div class="stat-content">
        <h2>{{stats.contactes}}</h2>
        <p>Contactés</p>
      </div>
    </mat-card>

    <mat-card class="stat-card signed">
      <mat-icon>check_circle</mat-icon>
      <div class="stat-content">
        <h2>{{stats.signes}}</h2>
        <p>Signés</p>
      </div>
    </mat-card>

    <mat-card class="stat-card amount">
      <mat-icon>euro</mat-icon>
      <div class="stat-content">
        <h2>{{stats.montantTotalSigne | number:'1.0-0'}}€</h2>
        <p>Montant Signé</p>
      </div>
    </mat-card>

    <mat-card class="stat-card conversion">
      <mat-icon>trending_up</mat-icon>
      <div class="stat-content">
        <h2>{{stats.tauxConversion}}%</h2>
        <p>Taux Conversion</p>
      </div>
    </mat-card>
  </div>

  <div *ngIf="!loading && !stats" class="error">
    <mat-icon>error_outline</mat-icon>
    <p>Impossible de charger les statistiques</p>
    <p class="hint">Assurez-vous que le backend est démarré sur le port 8080</p>
  </div>
</div>
